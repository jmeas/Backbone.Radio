{"version":3,"file":null,"sources":["../src/backbone.radio.js"],"sourcesContent":["import _ from 'underscore';\nimport Backbone from 'backbone';\n\nvar previousRadio = Backbone.Radio;\n\nvar Radio = Backbone.Radio = {};\n\nRadio.VERSION = '<%= version %>';\n\n// This allows you to run multiple instances of Radio on the same\n// webapp. After loading the new version, call `noConflict()` to\n// get a reference to it. At the same time the old version will be\n// returned to Backbone.Radio.\nRadio.noConflict = function() {\n  Backbone.Radio = previousRadio;\n  return this;\n};\n\n// Whether or not we're in DEBUG mode or not. DEBUG mode helps you\n// get around the issues of lack of warnings when events are mis-typed.\nRadio.DEBUG = false;\n\n// Format debug text.\nRadio._debugText = function(warning, eventName, channelName) {\n  return warning + (channelName ? ' on the ' + channelName + ' channel' : '') +\n    ': \"' + eventName + '\"';\n};\n\n// This is the method that's called when an unregistered event was called.\n// By default, it logs warning to the console. By overriding this you could\n// make it throw an Error, for instance. This would make firing a nonexistent event\n// have the same consequence as firing a nonexistent method on an Object.\nRadio.debugLog = function(warning, eventName, channelName) {\n  if (Radio.DEBUG && console && console.warn) {\n    console.warn(Radio._debugText(warning, eventName, channelName));\n  }\n};\n\nvar eventSplitter = /\\s+/;\n\n// An internal method used to handle Radio's method overloading for Requests.\n// It's borrowed from Backbone.Events. It differs from Backbone's overload\n// API (which is used in Backbone.Events) in that it doesn't support space-separated\n// event names.\nRadio._eventsApi = function(obj, action, name, rest) {\n  if (!name) {\n    return false;\n  }\n\n  var results = {};\n\n  // Handle event maps.\n  if (typeof name === 'object') {\n    for (var key in name) {\n      var result = obj[action].apply(obj, [key, name[key]].concat(rest));\n      eventSplitter.test(key) ? _.extend(results, result) : results[key] = result;\n    }\n    return results;\n  }\n\n  // Handle space separated event names.\n  if (eventSplitter.test(name)) {\n    var names = name.split(eventSplitter);\n    for (var i = 0, l = names.length; i < l; i++) {\n      results[names[i]] = obj[action].apply(obj, [names[i]].concat(rest));\n    }\n    return results;\n  }\n\n  return false;\n};\n\n// An optimized way to execute callbacks.\nRadio._callHandler = function(callback, context, args) {\n  var a1 = args[0], a2 = args[1], a3 = args[2];\n  switch (args.length) {\n    case 0: return callback.call(context);\n    case 1: return callback.call(context, a1);\n    case 2: return callback.call(context, a1, a2);\n    case 3: return callback.call(context, a1, a2, a3);\n    default: return callback.apply(context, args);\n  }\n};\n\n// A helper used by `off` methods to the handler from the store\nfunction removeHandler(store, name, callback, context) {\n  var event = store[name];\n  if (\n     (!callback || (callback === event.callback || callback === event.callback._callback)) &&\n     (!context || (context === event.context))\n  ) {\n    delete store[name];\n    return true;\n  }\n}\n\nfunction removeHandlers(store, name, callback, context) {\n  store || (store = {});\n  var names = name ? [name] : _.keys(store);\n  var matched = false;\n\n  for (var i = 0, length = names.length; i < length; i++) {\n    name = names[i];\n\n    // If there's no event by this name, log it and continue\n    // with the loop\n    if (!store[name]) {\n      continue;\n    }\n\n    if (removeHandler(store, name, callback, context)) {\n      matched = true;\n    }\n  }\n\n  return matched;\n}\n\n/*\n * tune-in\n * -------\n * Get console logs of a channel's activity\n *\n */\n\nvar _logs = {};\n\n// This is to produce an identical function in both tuneIn and tuneOut,\n// so that Backbone.Events unregisters it.\nfunction _partial(channelName) {\n  return _logs[channelName] || (_logs[channelName] = _.bind(Radio.log, Radio, channelName));\n}\n\n_.extend(Radio, {\n\n  // Log information about the channel and event\n  log: function(channelName, eventName) {\n    if (typeof console === 'undefined') { return; }\n    var args = _.toArray(arguments).slice(2);\n    console.log('[' + channelName + '] \"' + eventName + '\"', args);\n  },\n\n  // Logs all events on this channel to the console. It sets an\n  // internal value on the channel telling it we're listening,\n  // then sets a listener on the Backbone.Events\n  tuneIn: function(channelName) {\n    var channel = Radio.channel(channelName);\n    channel._tunedIn = true;\n    channel.on('all', _partial(channelName));\n    return this;\n  },\n\n  // Stop logging all of the activities on this channel to the console\n  tuneOut: function(channelName) {\n    var channel = Radio.channel(channelName);\n    channel._tunedIn = false;\n    channel.off('all', _partial(channelName));\n    delete _logs[channelName];\n    return this;\n  }\n});\n\n/*\n * Backbone.Radio.Requests\n * -----------------------\n * A messaging system for requesting data.\n *\n */\n\nfunction makeCallback(callback) {\n  return _.isFunction(callback) ? callback : function() { return callback; };\n}\n\nRadio.Requests = {\n\n  // Make a request\n  request: function(name) {\n    var args = _.toArray(arguments).slice(1);\n    var results = Radio._eventsApi(this, 'request', name, args);\n    if (results) {\n      return results;\n    }\n    var channelName = this.channelName;\n    var requests = this._requests;\n\n    // Check if we should log the request, and if so, do it\n    if (channelName && this._tunedIn) {\n      Radio.log.apply(this, [channelName, name].concat(args));\n    }\n\n    // If the request isn't handled, log it in DEBUG mode and exit\n    if (requests && (requests[name] || requests['default'])) {\n      var handler = requests[name] || requests['default'];\n      args = requests[name] ? args : arguments;\n      return Radio._callHandler(handler.callback, handler.context, args);\n    } else {\n      Radio.debugLog('An unhandled request was fired', name, channelName);\n    }\n  },\n\n  // Set up a handler for a request\n  reply: function(name, callback, context) {\n    if (Radio._eventsApi(this, 'reply', name, [callback, context])) {\n      return this;\n    }\n\n    this._requests || (this._requests = {});\n\n    if (this._requests[name]) {\n      Radio.debugLog('A request was overwritten', name, this.channelName);\n    }\n\n    this._requests[name] = {\n      callback: makeCallback(callback),\n      context: context || this\n    };\n\n    return this;\n  },\n\n  // Set up a handler that can only be requested once\n  replyOnce: function(name, callback, context) {\n    if (Radio._eventsApi(this, 'replyOnce', name, [callback, context])) {\n      return this;\n    }\n\n    var self = this;\n\n    var once = _.once(function() {\n      self.stopReplying(name);\n      return makeCallback(callback).apply(this, arguments);\n    });\n\n    return this.reply(name, once, context);\n  },\n\n  // Remove handler(s)\n  stopReplying: function(name, callback, context) {\n    if (Radio._eventsApi(this, 'stopReplying', name)) {\n      return this;\n    }\n\n    // Remove everything if there are no arguments passed\n    if (!name && !callback && !context) {\n      delete this._requests;\n    } else if (!removeHandlers(this._requests, name, callback, context)) {\n      Radio.debugLog('Attempted to remove the unregistered request', name, this.channelName);\n    }\n\n    return this;\n  }\n};\n\n/*\n * Backbone.Radio.channel\n * ----------------------\n * Get a reference to a channel by name.\n *\n */\n\nRadio._channels = {};\n\nRadio.channel = function(channelName) {\n  if (!channelName) {\n    throw new Error('You must provide a name for the channel.');\n  }\n\n  if (Radio._channels[channelName]) {\n    return Radio._channels[channelName];\n  } else {\n    return (Radio._channels[channelName] = new Radio.Channel(channelName));\n  }\n};\n\n/*\n * Backbone.Radio.Channel\n * ----------------------\n * A Channel is an object that extends from Backbone.Events,\n * and Radio.Requests.\n *\n */\n\nRadio.Channel = function(channelName) {\n  this.channelName = channelName;\n};\n\n_.extend(Radio.Channel.prototype, Backbone.Events, Radio.Requests, {\n\n  // Remove all handlers from the messaging systems of this channel\n  reset: function() {\n    this.off();\n    this.stopListening();\n    this.stopReplying();\n    return this;\n  }\n});\n\n/*\n * Top-level API\n * -------------\n * Supplies the 'top-level API' for working with Channels directly\n * from Backbone.Radio.\n *\n */\n\nvar channel, args, systems = [Backbone.Events, Radio.Requests];\n\n_.each(systems, function(system) {\n  _.each(system, function(method, methodName) {\n    Radio[methodName] = function(channelName) {\n      args = _.toArray(arguments).slice(1);\n      channel = this.channel(channelName);\n      return channel[methodName].apply(channel, args);\n    };\n  });\n});\n\nRadio.reset = function(channelName) {\n  var channels = !channelName ? this._channels : [this._channels[channelName]];\n  _.each(channels, function(channel) { channel.reset();});\n};\n\nexport default Radio;\n"],"names":["previousRadio","Backbone","Radio","VERSION","noConflict","DEBUG","_debugText","warning","eventName","channelName","debugLog","console","warn","eventSplitter","_eventsApi","obj","action","name","rest","results","key","result","apply","concat","test","_","extend","names","split","i","l","length","_callHandler","callback","context","args","a1","a2","a3","call","removeHandler","store","event","_callback","removeHandlers","keys","matched","_logs","_partial","bind","log","toArray","arguments","slice","channel","_tunedIn","on","off","makeCallback","isFunction","Requests","requests","_requests","handler","self","once","stopReplying","reply","_channels","Error","Channel","prototype","Events","stopListening","systems","each","system","method","methodName","reset","channels"],"mappings":"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"}