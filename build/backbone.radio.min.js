// Backbone.Radio v2.0.0
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],n):(e.Backbone=e.Backbone||{},e.Backbone.Radio=n(e._,e.Backbone))}(this,function(e,n){"use strict";function t(e,n,t,r){var o=e[n];return t&&t!==o.callback&&t!==o.callback._callback||r&&r!==o.context?void 0:(delete e[n],!0)}function r(n,r,o,u){n||(n={});for(var i=r?[r]:e.keys(n),s=!1,a=0,c=i.length;c>a;a++)r=i[a],n[r]&&t(n,r,o,u)&&(s=!0);return s}function o(n){return l[n]||(l[n]=e.bind(a.log,a,n))}function u(n){return e.isFunction(n)?n:function(){return n}}e="default"in e?e["default"]:e,n="default"in n?n["default"]:n;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(function(){function e(e){this.value=e}function n(n){function t(e,n){return new Promise(function(t,o){var s={key:e,arg:n,resolve:t,reject:o,next:null};i?i=i.next=s:(u=i=s,r(e,n))})}function r(t,u){try{var i=n[t](u),s=i.value;s instanceof e?Promise.resolve(s.value).then(function(e){r("next",e)},function(e){r("throw",e)}):o(i.done?"return":"normal",i.value)}catch(a){o("throw",a)}}function o(e,n){switch(e){case"return":u.resolve({value:n,done:!0});break;case"throw":u.reject(n);break;default:u.resolve({value:n,done:!1})}u=u.next,u?r(u.key,u.arg):i=null}var u,i;this._invoke=t,"function"!=typeof n["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype["throw"]=function(e){return this._invoke("throw",e)},n.prototype["return"]=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new n(e.apply(this,arguments))}},await:function(n){return new e(n)}}}(),n.Radio),a=n.Radio={};a.VERSION="2.0.0",a.noConflict=function(){return n.Radio=s,this},a.DEBUG=!1,a._debugText=function(e,n,t){return e+(t?" on the "+t+" channel":"")+': "'+n+'"'},a.debugLog=function(e,n,t){a.DEBUG&&console&&console.warn&&console.warn(a._debugText(e,n,t))};var c=/\s+/;a._eventsApi=function(n,t,r,o){if(!r)return!1;var u={};if("object"===("undefined"==typeof r?"undefined":i(r))){for(var s in r){var a=n[t].apply(n,[s,r[s]].concat(o));c.test(s)?e.extend(u,a):u[s]=a}return u}if(c.test(r)){for(var l=r.split(c),f=0,h=l.length;h>f;f++)u[l[f]]=n[t].apply(n,[l[f]].concat(o));return u}return!1},a._callHandler=function(e,n,t){var r=t[0],o=t[1],u=t[2];switch(t.length){case 0:return e.call(n);case 1:return e.call(n,r);case 2:return e.call(n,r,o);case 3:return e.call(n,r,o,u);default:return e.apply(n,t)}};var l={};e.extend(a,{log:function(n,t){if("undefined"!=typeof console){var r=e.toArray(arguments).slice(2);console.log("["+n+'] "'+t+'"',r)}},tuneIn:function(e){var n=a.channel(e);return n._tunedIn=!0,n.on("all",o(e)),this},tuneOut:function(e){var n=a.channel(e);return n._tunedIn=!1,n.off("all",o(e)),delete l[e],this}}),a.Requests={request:function(n){var t=e.toArray(arguments).slice(1),r=a._eventsApi(this,"request",n,t);if(r)return r;var o=this.channelName,u=this._requests;if(o&&this._tunedIn&&a.log.apply(this,[o,n].concat(t)),u&&(u[n]||u["default"])){var i=u[n]||u["default"];return t=u[n]?t:arguments,a._callHandler(i.callback,i.context,t)}a.debugLog("An unhandled request was fired",n,o)},reply:function(e,n,t){return a._eventsApi(this,"reply",e,[n,t])?this:(this._requests||(this._requests={}),this._requests[e]&&a.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:u(n),context:t||this},this)},replyOnce:function(n,t,r){if(a._eventsApi(this,"replyOnce",n,[t,r]))return this;var o=this,i=e.once(function(){return o.stopReplying(n),u(t).apply(this,arguments)});return this.reply(n,i,r)},stopReplying:function(e,n,t){return a._eventsApi(this,"stopReplying",e)?this:(e||n||t?r(this._requests,e,n,t)||a.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},a._channels={},a.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return a._channels[e]?a._channels[e]:a._channels[e]=new a.Channel(e)},a.Channel=function(e){this.channelName=e},e.extend(a.Channel.prototype,n.Events,a.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var f,h,p=[n.Events,a.Requests];return e.each(p,function(n){e.each(n,function(n,t){a[t]=function(n){return h=e.toArray(arguments).slice(1),f=this.channel(n),f[t].apply(f,h)}})}),a.reset=function(n){var t=n?[this._channels[n]]:this._channels;e.each(t,function(e){e.reset()})},a});
//# sourceMappingURL=backbone.radio.min.js.map
